
## picocli utils

Includes quality of life improvements for working with picocli.

* A version provider that can display version info from properties files on the class path. The files  can be generated by a build tool (e.g. see below for maven).
* Small wrappers for common tasks, such as adding a debug mode.


```bash
$ my-app -v
2.0.0-SNAPSHOT built at 2021-07-26 21:00
```

### VersionProviderFromClasspathProperties

The `VersionProviderFromClasspathProperties` class provides a base implementation for reading properties files from the classpath.

```java
public class MyVersionProvider
    extends VersionProviderFromClasspathProperties
{
    @Override public String getResourceName() { return "my-app.metadata.properties"; }
    @Override public Collection<String> getStrings(Properties p) { return Arrays.asList(
            p.get("my-app.version") + " built at " + p.get("my-app.build.timestamp")
    ); }

}

```

* Create a properties file with application metadata
```
# src/main/resources-filtered/my-app.metadata.properties
my-app.version=${project.version}
my-app.build.timestamp=${timestamp}

```

* Add resource filtering to the build section of the `pom.xml` file
```xml
<!-- pom.xml -->

<build>
  <resources>
    <resource>
      <directory>src/main/resources</directory>
    </resource>
    <resource>
      <directory>src/main/resources-filtered</directory>
      <filtering>true</filtering>
    </resource>
  </resources>

  <!-- ... ->
</build>
```

### Help, Version and Debug Mode

The class [CmdCommonBase](src/main/java/org/aksw/commons/picocli/CmdCommonBase.java) provides the default options `-h --help`, `-v --version` and `-X` (enable debug mode).
`CmdCommonBase` also implements the [HasDebugMode](src/main/java/org/aksw/commons/picocli/HasDebugMode.java) interface.

With `CmdUtils.call(cmd, args)` a small wrapper is provided that for any exception raised by a command implementing `HasDebugMode` full stack traces are shown if debug mode was enabled.
The wrapper also invokes System.exit() with the command's exit code.

Example:


```java
public class MainMyApp {
    public static void main(String[] args) {
        CmdUtils.callCmd(new MyCmd(), args);
    }
}

```

```java
@Command(name = "my-cmd", versionProvider = MyVersionProvider.class, description = "CLI of my app", public class MyCmd
    extends CmdCommonBase,
    implements Callable<Integer>
{
    @Override
    public int call() throws Exception {
        throw new RuntimeException("Invoking this command with -X will show the full stack trace");
    }
}

```
